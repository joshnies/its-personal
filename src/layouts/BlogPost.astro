---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import ArrowDown from "../../public/icons/pixelarticons-arrow-down.svg";
import { Image } from "astro:assets";
import { formatDate } from "../lib/util";

type Props = CollectionEntry<"blog">["data"];

const { title, summary, date, cover, coverAlt } = Astro.props;
---

<html lang="en">
    <head>
        <BaseHead title={title} description={summary} />
    </head>
    <body>
        <Header />
        <main>
            <section id="frontmatter">
                <div id="title">
                    <!-- <a id="back" href="/"><ArrowDown /> Back</a> -->
                    <time>{formatDate(date)}</time>
                    <h1>{title}</h1>
                </div>
            </section>
            <div id="hero-image">
                <Image src={cover} alt={coverAlt} />
            </div>
            <h2>{summary}</h2>
            <ArrowDown id="summary-arrow" />
            <article>
                <slot />
            </article>
        </main>
        <Footer />
    </body><style lang="scss">
        main {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-auto-rows: minmax(8rem, auto);
            gap: 0.25rem;
            padding: 1rem;
        }

        #frontmatter {
            grid-row-start: 2;
            grid-column-end: span 4;
        }

        #title {
            grid-row-start: 2;
            grid-column-end: span 3;

            time {
                display: flex;
                align-items: center;
                gap: 0.25rem;
                font-size: 0.8125rem;
                color: white;
                opacity: 0.8;

                svg {
                    width: 1rem;
                    height: 1rem;
                    transform: rotate(90deg);
                }
            }

            h1 {
                font-size: 6rem;
                font-weight: normal;
                letter-spacing: -3px;
                line-height: 6rem;
            }
        }

        #hero-image {
            grid-row-start: 3;
            grid-row-end: 6;
            grid-column-end: span 4;

            img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }

        h2 {
            grid-row-start: 7;
            grid-column-end: span 3;
            font-size: 2.25rem;
            font-weight: normal;
            letter-spacing: -1px;
            line-height: 2.5rem;
        }

        #summary-arrow {
            grid-row-start: 8;
            width: 2rem;
            height: 2rem;
        }

        article {
            grid-row-start: 9;
            grid-column-end: span 3;
            font-size: 1rem;
        }
    </style>
</html>
