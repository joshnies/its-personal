---
import { type CollectionEntry, getCollection } from "astro:content";
import { render } from "astro:content";
import Log from "../../layouts/Log.astro";

export async function getStaticPaths() {
  const logs = await getCollection("logs");
  return logs.map((log) => ({
    params: { slug: log.id },
    props: log,
  }));
}
type Props = CollectionEntry<"logs">;

const log = Astro.props;
const { Content } = await render(log);
---

<Log {...log.data}>
  <Content />
</Log>

<script>
  import { getTheme } from "../../lib/theme";

  const theme = getTheme();
  if (theme == "light") {
    document.documentElement.classList.add("light");
  }
</script>
